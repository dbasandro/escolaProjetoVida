<%- include ("./includes/default/0-head") %>

<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.0.0/polyfill.min.js"></script>

<!-- Aqui vc altera o tema de fundo: bg-theme2 -->
<body class="bg-theme bg-theme4" id="body-page" name="body-page">

    <!-- Efeito de fundo -->
    <div id="particles-js"></div>

    <!-- Formulário de Login -->
    <div class="login-center-me">
        <div class="login-card login-border-primary mb-3"
            style="max-width: 20rem; z-index: 1000; width: 250px; box-shadow: 4px 4px 4px 2px #00000033;">

            <!-- Logo marca -->
            <div class="login-card-header" style="text-align: center;">
                <img src="dist/img/logoMarca.png" style="height: 60px;">
            </div>

            <div class="card-body">
                <form action="/" method="post" onsubmit="return valida();">
                    <!-- Título -->
                    <div class="form-group">
                        <legend>Login</legend>
                    </div>

                    <!-- Campo usuário -->
                    <div class="form-group">
                        <small class="form-text login-text-muted mb-1">Usuário</small>
                        <input type="text" class="login-form-control login-form-control-sm" id="usuario" name="usuario"
                            placeholder="Usuário" value="<%= body.usuario %>">
                    </div>

                    <!-- Campo senha -->
                    <div class="form-group">
                        <small class="form-text login-text-muted mb-1">Senha</small>
                        <div class="input-icon-group">
                            <input autocomplete="off" type="password" class="login-form-control login-form-control-sm " id="senha"
                                name="senha" placeholder="Senha" value="" >
                            <div class="input-icon" id="revelar_PASS" onclick="(function(){
                                revelar(document.getElementById('revelar_PASS'), document.getElementById('senha'));
                              })()">
                                <i class="fas fa-eye"></i>
                            </div>
                        </div>
                    </div>

                     <!-- Digite uma nova senha -->
                    <div class="form-group" style = "display: none;" id="form_nova_senha">
                        <small class="form-text login-text-muted mb-1" >Digite uma nova senha</small>
                        <div class="input-icon-group">
                            <input autocomplete="off" type="password" class="login-form-control login-form-control-sm " id="imput_nova_senha"
                                name="imput_nova_senha" placeholder="Nova senha" value="" minlength="8">
                            <div class="input-icon" id="revelar_PASS" onclick="(function(){
                                revelar(document.getElementById('revelar_PASS'), document.getElementById('imput_nova_senha'));
                              })()">
                                <i class="fas fa-eye"></i>
                            </div>
                        </div>
                    </div>

                     <!-- Confirme a nova senha -->
                    <div class="form-group" style = "display: none;" id="form_confirma_senha">
                        <small class="form-text login-text-muted mb-1">Confirme a nova senha</small>
                        <div class="input-icon-group">
                            <input autocomplete="off" type="password" class="login-form-control login-form-control-sm " id="imput_confirma_senha"
                                name="imput_confirma_senha" placeholder="Confirme a nova senha" value="" >
                            <div class="input-icon" id="revelar_PASS" onclick="(function(){
                                revelar(document.getElementById('revelar_PASS'), document.getElementById('imput_confirma_senha'));
                              })()">
                                <i class="fas fa-eye"></i>
                            </div>
                        </div>
                    </div>
                  <!--  <div class="form-group">
                    <label class="form-text login-text-muted mb-1">Unidade</label>
<select  class="form-group login-form-control login-form-control-sm" value ="<%= body.unidade %>" name="unidade" id="unidade">
  <option value="1" name="unidade" id="unidade">Projeto Vida Infantil</option>
  <option value="2" name="unidade" id="unidade">Projeto Vida - Fundamental</option>
  <option value="3" name="unidade" id="unidade"> Novo Pátio</option>
</select>
</div>-->

    
    <script>
        function valida(){

            var password = document.getElementById("senha")
            var div_nova_senha = document.getElementById("form_nova_senha")
            var div_confirma_senha = document.getElementById("form_confirma_senha")

            var nova_senha = document.getElementById("imput_nova_senha")
            var confirma_senha = document.getElementById("imput_confirma_senha")

if (password.value == '') {
    return false;
} else {
            if (div_nova_senha.style.display == "none"){
        if (password.value == "123mudar@") { 

            div_nova_senha.style.display = "block"
            div_confirma_senha.style.display = "block"

            alert("Digite uma nova senha.")
           
            return false;
        } 
    } else 
    {
        if (nova_senha.value == confirma_senha.value){
           
           
            return true;
        }
        else {
            alert("A nova senha está diferente do campo de confirmação.")
            return false;
        }
    }
}
    }

    </script>

                    <!-- Botão Entrar -->
                    <div class="form-group" style="float: right; margin-block-end: auto;">
                        <button type="submit" class="login-btn login-btn-primary login-btn-sm login-btn-block"
                            style="width: 80px;">Entrar</button>
                    </div>

                </form>
                <!-- /.form -->
            </div>
            <!-- /.card-body -->
        </div>
        <!-- ./card -->
    </div>
    <!-- ./center-me -->

    <!-- Utilizado pelo Toast no tail -->
    <span style="display:none" id='status_Login'><%= status_Login %></span>

    <%- include ("./includes/default/6-tail") %>